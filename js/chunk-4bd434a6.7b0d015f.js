(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bd434a6"],{"206d":function(t,e,n){"use strict";var r=n("9cbb"),s=n.n(r);s.a},"3c43":function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!==typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}},4261:function(t,e,n){"use strict";var r=n("b095"),s=n.n(r);s.a},"48ac":function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/vue-jwt-decode/dist",e(e.s=10)}([function(t,e,n){t.exports=!n(1)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(16);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(6),s=n(5);t.exports=function(t){return r(s(t))}},function(t,e,n){"use strict";var r=n(11),s=n.n(r);e.a={install:function(t){t.prototype.$jwtDec=this,t.jwtDec=this},decode:function(t){if("string"!=typeof t&!t instanceof String)return null;var e=t.split(".");if(e.length<2)return null;var n=JSON.parse(atob(e[0])),r=JSON.parse(atob(e[1]));return s()({},n,r)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9);e.default=r.a},function(t,e,n){t.exports={default:n(12),__esModule:!0}},function(t,e,n){n(38),t.exports=n(4).Object.assign},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(3);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(8),s=n(34),o=n(33);t.exports=function(t){return function(e,n,a){var i,c=r(e),u=s(c.length),l=o(a,u);if(t&&n!=n){for(;u>l;)if((i=c[l++])!=i)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(13);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,s){return t.call(e,n,r,s)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(3),s=n(2).document,o=r(s)&&r(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(2),s=n(4),o=n(17),a=n(22),i=function(t,e,n){var c,u,l,p=t&i.F,d=t&i.G,f=t&i.S,h=t&i.P,m=t&i.B,v=t&i.W,g=d?s:s[e]||(s[e]={}),b=g.prototype,_=d?r:f?r[e]:(r[e]||{}).prototype;for(c in d&&(n=e),n)(u=!p&&_&&void 0!==_[c])&&c in g||(l=u?_[c]:n[c],g[c]=d&&"function"!=typeof _[c]?n[c]:m&&u?o(l,r):v&&_[c]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):h&&"function"==typeof l?o(Function.call,l):l,h&&((g.virtual||(g.virtual={}))[c]=l,t&i.R&&b&&!b[c]&&a(b,c,l)))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,t.exports=i},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(25),s=n(30);t.exports=n(0)?function(t,e,n){return r.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=!n(0)&&!n(1)(function(){return 7!=Object.defineProperty(n(18)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";var r=n(28),s=n(26),o=n(29),a=n(35),i=n(6),c=Object.assign;t.exports=!c||n(1)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r})?function(t,e){for(var n=a(t),c=arguments.length,u=1,l=s.f,p=o.f;c>u;)for(var d,f=i(arguments[u++]),h=l?r(f).concat(l(f)):r(f),m=h.length,v=0;m>v;)p.call(f,d=h[v++])&&(n[d]=f[d]);return n}:c},function(t,e,n){var r=n(14),s=n(23),o=n(36),a=Object.defineProperty;e.f=n(0)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),s)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(21),s=n(8),o=n(15)(!1),a=n(31)("IE_PROTO");t.exports=function(t,e){var n,i=s(t),c=0,u=[];for(n in i)n!=a&&r(i,n)&&u.push(n);for(;e.length>c;)r(i,n=e[c++])&&(~o(u,n)||u.push(n));return u}},function(t,e,n){var r=n(27),s=n(19);t.exports=Object.keys||function(t){return r(t,s)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(32)("keys"),s=n(37);t.exports=function(t){return r[t]||(r[t]=s(t))}},function(t,e,n){var r=n(2),s=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return s[t]||(s[t]={})}},function(t,e,n){var r=n(7),s=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?s(t+e,0):o(t,e)}},function(t,e,n){var r=n(7),s=Math.min;t.exports=function(t){return t>0?s(r(t),9007199254740991):0}},function(t,e,n){var r=n(5);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(3);t.exports=function(t,e){if(!r(t))return t;var n,s;if(e&&"function"==typeof(n=t.toString)&&!r(s=n.call(t)))return s;if("function"==typeof(n=t.valueOf)&&!r(s=n.call(t)))return s;if(!e&&"function"==typeof(n=t.toString)&&!r(s=n.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(20);r(r.S+r.F,"Object",{assign:n(24)})}])})},"7edc":function(t,e,n){"use strict";var r=n("87aa"),s=n.n(r);s.a},"87aa":function(t,e,n){},"9cbb":function(t,e,n){},a55b:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row text-center p25t p25b"},[r("router-link",{staticClass:"col",attrs:{to:"/"}},[r("img",{attrs:{src:n("5214"),alt:"Sarascare",id:"logo"}})])],1),r("div",{staticClass:"row text-center align-items-center justify-content-center"},[1==t.registerAsNew?r("div",{staticClass:"col-12 col-sm-10 col-md-6"},[r("LoginForm",{attrs:{componentTitle:"Login to your account"}}),r("RegisterForm",{attrs:{componentTitle:"Register an account"}})],1):t._e(),0==t.registerAsNew?r("div",{staticClass:"col-12 col-sm-10 col-md-6"},[r("RegisterAsReporter",{attrs:{componentTitle:"Register an account"}})],1):t._e()])])])},s=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{staticClass:"needs-validation",attrs:{id:"login"}},[n("h4",[t._v(t._s(t.componentTitle))]),n("div",{staticClass:"m25b"},[n("b-field",[n("b-input",{attrs:{placeholder:"Enter Username",maxlength:"30"},on:{click:t.clearUserCheckMessage},model:{value:t.input.email,callback:function(e){t.$set(t.input,"email",e)},expression:"input.email"}})],1),n("b-field",[n("b-input",{attrs:{placeholder:"Enter Password",type:"password"},on:{click:t.clearUserCheckMessage},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.input.password,callback:function(e){t.$set(t.input,"password",e)},expression:"input.password"}})],1),t.userCheckMessage?n("p",{staticClass:"error"},[t._v(t._s(t.userCheckMessage)+" ")]):t._e()],1),n("button",{staticClass:"btn solid secondary submit w-100",attrs:{type:"button"},on:{click:function(e){return t.login()}}},[t._v("Sign In")]),t.loading?n("div",{staticClass:"text-center"},[n("b-spinner",{attrs:{variant:"primary",label:"Text Centered"}})],1):t._e()]),n("LoginModal",{attrs:{open:this.setActive,phone:this.phone,method:t.routing},on:{close:t.closeChild}}),n("div")],1)},a=[],i=(n("a481"),n("6762"),n("2fdb"),n("7f7f"),n("48ac")),c=n.n(i),u=(n("3c43"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{active:t.open,"can-cancel":!0,"has-modal-card":""},on:{"update:active":function(e){t.open=e}}},[n("div",{attrs:{id:"wrapper"}},[n("div",{attrs:{id:"dialog"}},[n("h4",[t._v("Please enter the 6-digit OTP code received via SMS:")]),n("p",[t._v("Registered Phone Number: "+t._s(t.phone))]),n("VueOTPField",{attrs:{amount:6,onFill:t.onFill}}),n("div",[n("button",{staticClass:"btn bordered primary w-40",attrs:{disabled:t.canSubmit},on:{click:t.onOtpSubmit}},[t._v("Verify")]),t.otpFailed?n("p",{staticClass:"error"},[t._v("Error Occured!!!")]):t._e()])],1)])])}),l=[],p=(n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-otp-container",style:{gridTemplateColumns:"repeat("+t.amount+", 1fr)"}},t._l(t.amount,function(e,r){return n("div",{key:r,staticClass:"vue-otp-wrapper"},[n("input",{staticClass:"vue-otp-field",attrs:{type:t.type,maxlength:t.max,placeholder:t.placeholder,autocomplete:"off"},on:{keyup:function(e){return t.isNumber(e,r)},focusin:function(e){return t.onFocusIn(e,r)}}})])}),0)}),d=[],f=(n("6b54"),n("c5f6"),{data:function(){return{isFieldCompleted:!1}},props:{max:{type:Number,default:1},type:{type:String,default:"tel"},placeholder:{type:String,default:"●"},amount:{type:Number,default:4},onFieldCompleted:{type:Function,default:function(){}},onFill:{type:Function,default:function(){}},resetFields:{type:Function,default:function(){}}},methods:{onFocusIn:function(t,e){var n=document.querySelectorAll(".vue-otp-field");n[e].value=""},isNumber:function(t,e){var n=[0,1,2,3,4,5,6,7,8,9],r=document.querySelectorAll(".vue-otp-field");r[e].setSelectionRange(0,1);var s=window.getSelection(),o=s.toString(),a=parseInt(o,10);n.indexOf(a)>-1&&(r[e].value=a,5!==e&&(r[e+1].focus(),r[e+1].value="")),(""===o||/[a-z]/.test(o))&&(r[e].value="",0!==e&&(r[e-1].focus(),r[e-1].value=""));var i=[];r.forEach(function(t){i.push(t.value)});var c=i.every(function(t){return""!==t});if(this.onFill({isFieldsComplete:c,currentValue:i[e],values:i.join("")}),5===e&&c){var u=i.join("");this.onFieldCompleted(u)}}}}),h=f,m=(n("4261"),n("2877")),v=Object(m["a"])(h,p,d,!1,null,null,null),g=v.exports,b={data:function(){return{canSubmit:!0,otpValue:"",otpFailed:!1,authy:""}},components:{VueOTPField:g},computed:{modalHeight:function(){return this.otpFailed?270:265},openModal:{get:function(){return this.$props.open},set:function(t){}}},props:["phone","open","method"],methods:{show:function(){this.otpFailed=!1},onFill:function(t){t.isFieldsComplete&&(this.otpInput=t.values,this.canSubmit=!1)},beforeOpen:function(t){this.authy=t.params.authyID},closeModal:function(t){this.$emit("close",!1)},onOtpSubmit:function(){var t=this;this.otpFailed=!1,console.log(this.authy),axios.post("verifyOTP/",{verifyCode:this.otpInput,authy_id:this.$store.getters.getAuthyId}).then(function(e){var n=e.data;"VERIFIED"==n?t.method():t.otpFailed=!0}).catch(function(e){t.otpFailed=!0})}}},_=b,w=(n("7edc"),Object(m["a"])(_,u,l,!1,null,null,null)),$=w.exports,y={name:"LoginForm",props:{componentTitle:String},components:{LoginModal:$},data:function(){return{input:{email:"",password:""},info:null,baseURL:axios.defaults.baseURL,url:"",jwt:"",jwtDecoded:"",userName:"",userRoles:"",AuthStr:"",userCheckMessage:"",loading:!1,setActive:!1,phone:""}},methods:{closeChild:function(){this.setActive=!1},login:function(){var t=this;this.$parent.$parent.mainUserName="",this.$parent.$parent.mainContactId="",this.$parent.$parent.mainUserRoles="",this.$parent.$parent.mainName="",this.$parent.$parent.mainJWT="",""!=this.input.email&&""!=this.input.password?(this.loading=!0,axios.all([this.getProfile()]).then(axios.spread(function(e){t.jwt=e,t.$parent.$parent.mainJWT=e,t.doRouting()})).catch(function(e){console.log("ERROR_LOGIN"),t.loading=!1,t.userCheckMessage="User ["+t.input.email+"] not found or password incorrect"})):this.userCheckMessage="An email and password must be present"},getProfile:function(){return this.url=this.baseURL+"/tokens",axios.post(this.url,{},{auth:{username:this.input.email,password:this.input.password}})},getName:function(){var t="Bearer "+this.$parent.$parent.mainJWT.data.token,e={headers:{Authorization:t}};return this.url=this.baseURL+"/contacts/"+this.jwtDecoded.contactId,axios.get(this.url,e)},doRouting:function(){var t=this;this.jwtDecoded=c.a.decode(this.jwt.data.token),this.userName=this.jwtDecoded.username,this.userRoles=this.jwtDecoded.roles,this.$parent.$parent.mainUserName=this.userName,this.$parent.$parent.mainContactId=this.jwtDecoded.contactId,this.$parent.$parent.mainUserRoles=this.userRoles,axios.all([this.getName()]).then(axios.spread(function(e){t.$parent.$parent.mainName=e.data.name,t.$parent.$parent.loggedin.id=e.data.id,t.$parent.$parent.loggedin.name=e.data.name,t.$parent.$parent.loggedin.userName=e.data.userAccount.username,t.$parent.$parent.loggedin.email=e.data.email,t.$parent.$parent.loggedin.phone=e.data.phoneNumber,t.$parent.$parent.loggedin.dob=e.data.dateOfBirth,t.$parent.$parent.loggedin.joined=e.data.joinDate,t.$parent.$parent.loggedin.left=e.data.leftDate,t.$parent.$parent.loggedin.isActive=e.data.isActive,t.$parent.$parent.loggedin.role=e.data.userAccount.roles["0"],t.$parent.$parent.authenticated=!0,t.goForth()}))},openOtpModal:function(){var t=this;this.phone=this.$parent.$parent.loggedin.phone,this.setActive=!0,axios.post("genOTP/",{phone_number:this.$parent.$parent.loggedin.phone,email:this.$parent.$parent.loggedin.email,country_code:"+61"}).then(function(e){t.loading=!0;var n=e&&e.data;"TOKEN-SENT"===n.status&&(t.$store.commit("setAuthyId",n.authyID),t.loading=!1)}).catch(function(e){console.log(e),t.loading=!1,t.otpError=!0})},goForth:function(){""!=this.userName&&""!=this.userRoles&&(this.userRoles.includes("ROLE_ADMIN")&&null!=this.$parent.$parent.loggedin.phone?this.openOtpModal():this.userRoles.includes("ROLE_ADMIN")?null==this.$parent.$parent.loggedin.phone&&(this.userCheckMessage="",this.$emit("authenticated",!0),this.$router.replace({name:"admin-dash"})):this.userRoles.includes("ROLE_CASE_OFFICER")?this.openOtpModal():(this.userRoles.includes("ROLE_REGISTERED_USER")||this.userRoles.includes("ROLE_SPECIAL"))&&(this.userCheckMessage="",this.$emit("authenticated",!0),this.$router.replace({name:"reguser-dash"})))},routing:function(){""!=this.userName&&""!=this.userRoles&&(this.userRoles.includes("ROLE_ADMIN")?(this.userCheckMessage="",this.$emit("authenticated",!0),this.$router.replace({name:"admin-dash"})):this.userRoles.includes("ROLE_CASE_OFFICER")?(this.userCheckMessage="",this.$emit("authenticated",!0),this.$router.replace({name:"cofficer-dash"})):(this.userRoles.includes("ROLE_REGISTERED_USER")||this.userRoles.includes("ROLE_SPECIAL"))&&(this.userCheckMessage="",this.$emit("authenticated",!0),this.$router.replace({name:"reguser-dash"})))},doCheckSecured:function(){axios.all([this.checkProtectedArea()]).then(axios.spread(function(t){console.log("Z_SECURED"),console.log(t)})).catch(function(t){console.log("ERROR_SECURED"),console.log(t),alert(t)})},checkProtectedArea:function(){this.url=this.baseURL+"/staff",this.AuthStr="Bearer "+this.$parent.$parent.mainJWT.data.token;var t={headers:{Authorization:this.AuthStr}};return axios.get(this.url,t)},clearUserCheckMessage:function(t){this.userCheckMessage=""}}},x=y,C=Object(m["a"])(x,o,a,!1,null,"67c7255c",null),E=C.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"needs-validation",attrs:{id:"register"},on:{submit:function(t){t.preventDefault()}}},[t._m(0),n("h4",[t._v(t._s(t.componentTitle))]),n("div",{staticClass:"row form-group"},[n("div",{staticClass:"col-12"},[n("b-notification",{directives:[{name:"show",rawName:"v-show",value:1==t.status_istaken,expression:"status_istaken == true"}],staticClass:"col-12 w-100",attrs:{"has-icon":"",active:t.status_istaken,type:"is-warning","aria-close-label":"Close notification"},on:{"update:active":function(e){t.status_istaken=e}}},[t._v("Username is already taken, please try again.")]),n("b-notification",{directives:[{name:"show",rawName:"v-show",value:1==t.status_issuccess,expression:"status_issuccess == true"}],staticClass:"col-12 w-100",attrs:{active:t.status_issuccess,"has-icon":"",type:"is-success","aria-close-label":"Close notification"},on:{"update:active":function(e){t.status_issuccess=e}}},[t._v("Registered successfully. Please use above form to login.")]),n("b-field",[n("b-input",{attrs:{id:"name",type:"name",placeholder:"Enter Name *",minlength:"3",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),n("b-field",[n("b-input",{attrs:{id:"email",type:"email",placeholder:"Enter Email *",required:""},on:{input:t.$v.email.$touch},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),n("b-field",[n("b-field",[n("b-input",{attrs:{placeholder:t.$t("countryCode"),icon:"earth",disabled:!0},model:{value:t.country_code,callback:function(e){t.country_code=e},expression:"country_code"}})],1),n("div",{staticStyle:{width:"100%"},attrs:{id:"parent"}},[n("div",[n("b-input",{attrs:{id:"phone",type:"phone",placeholder:"Enter Phone Number",expanded:""},model:{value:t.$v.phone.$model,callback:function(e){t.$set(t.$v.phone,"$model","string"===typeof e?e.trim():e)},expression:"$v.phone.$model"}})],1),t.$v.phone.$dirty?n("div",{staticStyle:{margin:"9px"},attrs:{id:"phone-error"}},[t.$v.phone.checkValid?t._e():n("p",{staticClass:"error"},[t._v("Please enter a phone number.")])]):t._e()])],1),n("hr"),n("b-field",[n("b-input",{attrs:{id:"username",type:"text",placeholder:"Enter Username *",minlength:"3",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),n("b-field",[n("b-input",{attrs:{id:"password",type:"password",placeholder:"Enter Password *",required:""},model:{value:t.$v.password.$model,callback:function(e){t.$set(t.$v.password,"$model","string"===typeof e?e.trim():e)},expression:"$v.password.$model"}})],1),t.$v.password.$dirty?n("div",[t.$v.password.checkValue?t._e():n("p",{staticClass:"error"},[t._v("Password must have a letter, a number, special character, and be more than 8 characters long.")])]):t._e(),n("b-field",[n("b-input",{attrs:{id:"confirmpassword",type:"password",placeholder:"Confirm Password *"},model:{value:t.$v.confirmpassword.$model,callback:function(e){t.$set(t.$v.confirmpassword,"$model","string"===typeof e?e.trim():e)},expression:"$v.confirmpassword.$model"}})],1),t.$v.confirmpassword.sameAsPassword?t._e():n("p",{staticClass:"error"},[t._v("Passwords must be identical.")])],1)]),n("button",{staticClass:"btn bordered primary w-100",attrs:{disabled:t.$v.$invalid},on:{click:function(e){return t.formSubmit()}}},[t._v("Sign up")]),t.loading?n("div",{staticClass:"text-center"},[n("b-spinner",{attrs:{variant:"primary",label:"Text Centered"}})],1):t._e(),t.otpError?n("p",{staticClass:"error"},[t._v("OTP could not be generated.")]):t._e()])},R=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h4",{staticClass:"or"},[n("span",[t._v("Or")])])}],k=n("b5ae"),S={name:"RegisterForm",props:{componentTitle:String},data:function(){return{username:"",password:"",confirmpassword:"",role:"ROLE_REGISTERED_USER",name:"",phone:"",email:"",dob:"",userAccountID:"",status_istaken:!1,status_issuccess:!1,showModal:!1,loading:!1,otpError:!1,country_code:"+91"}},validations:{password:{required:k["required"],checkValue:function(t){return!!(/[a-z]/.test(t)&&/[0-9]/.test(t)&&/\W|_/.test(t)&&t.length>=8)}},confirmpassword:{sameAsPassword:Object(k["sameAs"])("password")},email:{email:k["email"],required:k["required"]},username:{required:k["required"]},phone:{required:k["required"],checkValid:function(t){return!(!/[0-9]/.test(t)||10!=t.length||/[a-z]/.test(t)||/[A-Z]/.test(t)||/\W|_/.test(t))}},country_code:{required:k["required"]}},methods:{formSubmit:function(){var t=this;this.loading=!0,axios.post("user-accounts",{username:this.username,password:this.password,roles:this.role}).then(function(e){t.userAccountID=e.data.id,axios.post("other-contacts",{name:t.name,phoneNumber:t.phone,email:t.email,userAccount:t.userAccountID}).then(function(e){t.loading=!1,t.status_istaken=!1,t.status_issuccess=!0}).catch(function(e){t.loading=!1})}).catch(function(e){t.loading=!1,t.status_issuccess=!1,t.status_istaken=!0})}}},A=S,j=(n("e15f"),Object(m["a"])(A,O,R,!1,null,"7a254768",null)),I=j.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"needs-validation",attrs:{id:"register"},on:{submit:t.formSubmit}},[n("h4",[t._v(t._s(t.componentTitle))]),n("div",{staticClass:"row form-group"},[1==t.status_issuccess?n("b-notification",{staticClass:"col-12 w-100",attrs:{type:"is-success","aria-close-label":"Close notification"}},[n("i",{staticClass:"fas fa-check-circle"}),t._v(" User has been created successfully.\n            ")]):t._e(),1==t.status_istaken?n("b-notification",{staticClass:"col-12 w-100",attrs:{type:"is-warning","aria-close-label":"Close notification"}},[n("i",{staticClass:"fas fa-times-circle"}),t._v(" Username has been taken. Please try another. \n            ")]):t._e(),n("div",{staticClass:"col-12"},[n("b-field",[n("b-input",{attrs:{id:"username",type:"text",placeholder:"Enter Username  *",minlength:"3",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),n("b-field",[n("b-input",{attrs:{id:"password",type:"password",placeholder:"Enter Password *",required:""},model:{value:t.$v.password.$model,callback:function(e){t.$set(t.$v.password,"$model","string"===typeof e?e.trim():e)},expression:"$v.password.$model"}})],1),t.$v.password.minLength?t._e():n("p",{staticClass:"error"},[t._v("Password must have at least "+t._s(t.$v.password.$params.minLength.min)+" letters.")]),n("b-field",[n("b-input",{attrs:{id:"confirmpassword",type:"password",placeholder:"Confirm Password *"},model:{value:t.$v.confirmpassword.$model,callback:function(e){t.$set(t.$v.confirmpassword,"$model","string"===typeof e?e.trim():e)},expression:"$v.confirmpassword.$model"}})],1),t.$v.confirmpassword.sameAsPassword?t._e():n("p",{staticClass:"error"},[t._v("Passwords must be identical.")])],1)],1),n("button",{staticClass:"btn solid secondary submit w-100",attrs:{type:"submit"}},[t._v("Sign up")])])},F=[],M={name:"RegisterForm",props:{componentTitle:String},data:function(){return{username:"",password:"",confirmpassword:"",role:"ROLE_REGISTERED_USER",name:"",phone:"",email:"",dob:"",userAccountID:"",contactID:"",status_issuccess:!1,status_istaken:!1}},validations:{password:{minLength:Object(k["minLength"])(6)},confirmpassword:{sameAsPassword:Object(k["sameAs"])("password")}},methods:{formSubmit:function(t){var e=this;t.preventDefault(),this.contactID=this.$parent.$parent.registration.reportedUserID,axios.post("user-accounts",{username:this.username,password:this.password,roles:this.role}).then(function(t){console.log(t),e.userAccountID=t.data.id,axios.all([e.postOtherContact(),e.postContactUserAccount()]).then(axios.spread(function(t){e.status_issuccess=!0}))}).catch(function(t){e.status_istaken=!0})},postOtherContact:function(){axios.patch("other-contacts",{userAccount:this.userAccountID})},postContactUserAccount:function(){axios.patch("contacts/"+this.contactID,{userAccount:this.userAccountID})}}},N=M,D=Object(m["a"])(N,P,F,!1,null,"4e42a2a2",null),L=D.exports,T={name:"Login",components:{LoginForm:E,RegisterForm:I,RegisterAsReporter:L},data:function(){return{registerAsNew:this.$parent.registration.asNew}},methods:{}},U=T,q=(n("206d"),Object(m["a"])(U,r,s,!1,null,null,null));e["default"]=q.exports},b095:function(t,e,n){},dea1:function(t,e,n){},e15f:function(t,e,n){"use strict";var r=n("dea1"),s=n.n(r);s.a}}]);
//# sourceMappingURL=chunk-4bd434a6.7b0d015f.js.map