(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6eca1c0c"],{"03dd":function(t,e,n){"use strict";var s=n("f1f4"),a=n.n(s);a.a},"15e7":function(t,e,n){"use strict";var s=n("3f0d"),a=n.n(s);a.a},"3f0d":function(t,e,n){},"7fd1":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"private m80b",attrs:{id:"dashboard"}},[n("Header",{attrs:{componentTitle:"Header"}}),n("section",{staticClass:"loadcontent"},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row m50t"},[n("AssignedCases",{attrs:{componentTitle:"List of Assigned Cases"}})],1)])])],1)},a=[],o=(n("7f7f"),n("336b")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"has-table col-12"},[n("div",{staticClass:"row justify-content-between align-items-center m25b"},[n("p",{staticClass:"col-12 col-md-6 title m25b"},[t._v(t._s(t.componentTitle))]),n("div",{staticClass:"col-auto col-md-6 text-right"},[n("button",{staticClass:"btn solid secondary",attrs:{type:"button"},on:{click:function(e){return t.downloadCSV()}}},[n("i",{staticClass:"fas fa-file-csv"}),n("span",{staticClass:"m15l d-none d-sm-inline"},[t._v("Export to CSV")])])])]),n("div",{staticClass:"row justify-content-between align-items-center"},[n("div",{staticClass:"col-12"},[n("vue-good-table",{attrs:{styleClass:"vgt-table",columns:t.columns,rows:t.data,"search-options":{enabled:!0,trigger:"enter",placeholder:"To search, type a keyword and hit enter"},"sort-options":{enabled:!0,setInitialSort:{field:"id",type:"desc"}},"pagination-options":{enabled:!0,perPage:10}},on:{"on-row-click":t.onRowClick},scopedSlots:t._u([{key:"table-row",fn:function(e){return["status"==e.column.field?n("span",["New"===e.row.offenseStatus.description?n("span",{staticClass:"tag is-dark"},[t._v("\n                                "+t._s(e.row.offenseStatus.description)+"\n                            ")]):t._e(),"In Progress"===e.row.offenseStatus.description?n("span",{staticClass:"tag is-primary"},[t._v("\n                                "+t._s(e.row.offenseStatus.description)+"\n                            ")]):t._e(),"Pending"===e.row.offenseStatus.description?n("span",{staticClass:"tag is-info"},[t._v("\n                                "+t._s(e.row.offenseStatus.description)+"\n                            ")]):t._e(),"Cancelled"===e.row.offenseStatus.description?n("span",{staticClass:"tag"},[t._v("\n                                "+t._s(e.row.offenseStatus.description)+"\n                            ")]):t._e(),"Closed"===e.row.offenseStatus.description?n("span",{staticClass:"tag is-success"},[t._v("\n                                "+t._s(e.row.offenseStatus.description)+"\n                            ")]):t._e()]):t._e(),"notes"==e.column.field?n("span",[null!==e.row.notes?n("i",{staticClass:"fas fa-comment active m10r"}):n("i",{staticClass:"fas fa-comment m10r"}),e.row.evidence&&e.row.evidence.length?n("i",{staticClass:"fas fa-file active"}):n("i",{staticClass:"fas fa-file"})]):n("span",[t._v("\n                            "+t._s(e.formattedRow[e.column.field])+"\n                         ")])]}}])})],1)])])},c=[],r={name:"AllCases",props:{componentTitle:String},mounted:function(){var t=this,e="Bearer "+this.$parent.$parent.mainJWT.data.token,n={headers:{Authorization:e}};axios.get("offenses",n).then(function(e){t.data=e.data,t.tuneData()}).catch(function(e){console.log(e),t.errored=!0}).finally(function(){return t.loading=!1})},data:function(){var t=[{id:"01010",offenseStatus:"Pending",offenseDate:"03/05/2019",offenseType:"Kidnapping",location:"Hawaii",caseOfficer:"Melissa Tores"}];return{data:t,columns:[{label:"ID",field:"id",type:"number",sortable:!0},{label:"Offense Status",field:"status"},{label:"Offense Type",field:"offenseType.description"},{label:"Offense Date",field:"offenseDate",type:"date",dateInputFormat:"YYYY-MM-DD",dateOutputFormat:"DD/MM/YY"},{label:"Accused",field:this.accusedFieldFn},{label:"Location",field:"location"},{label:"Notes",field:"notes",html:!0}],rows:[]}},methods:{accusedFieldFn:function(t){for(var e in t.offenseContacts)if("Offender"===t.offenseContacts[e].contactType.description)return t.offenseContacts[e].contact.name},onRowClick:function(t){this.$router.push("/caseofficer/case/"+t.row.id)},tuneData:function(){var t=[];for(var e in this.data)null!==this.data[e].caseOfficer&&this.data[e].caseOfficer.name===this.$parent.$parent.loggedin.name&&t.push(this.data[e]);this.data=t,this.$parent.issuedcount=t.length},exportCSV:function(t,e){var n,s;n=new Blob([t],{type:"text/csv"}),s=document.createElement("a"),s.download=e,s.href=window.URL.createObjectURL(n),s.style.display="none",document.body.appendChild(s),s.click()},exportTableToCSV:function(t,e){for(var n=[],s=document.querySelectorAll("table tr"),a=0;a<s.length;a++){for(var o=[],i=s[a].querySelectorAll("td, th"),c=0;c<i.length;c++)o.push(i[c].innerText);n.push(o.join(","))}this.exportCSV(n.join("\n"),e)},downloadCSV:function(){var t=document.querySelector("table").outerHTML;this.exportTableToCSV(t,"sarascare-assigned.csv")}}},l=r,d=(n("15e7"),n("2877")),f=Object(d["a"])(l,i,c,!1,null,"51d26978",null),u=f.exports,p={name:"Case Officer Dashboard",components:{Header:o["a"],AssignedCases:u},mounted:function(){this.$parent.checkLoggedIn()?(console.log("CS Dashboard mounted."),console.log("Parent calling "+this.$route.name)):this.$router.push("/404")},data:function(){return{authenticated:!1}},methods:{setAuthenticated:function(t){this.authenticated=t},logout:function(){this.authenticated=!1}}},h=p,m=(n("03dd"),Object(d["a"])(h,s,a,!1,null,null,null));e["default"]=m.exports},f1f4:function(t,e,n){}}]);
//# sourceMappingURL=chunk-6eca1c0c.9c96f692.js.map